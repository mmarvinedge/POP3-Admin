<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:adm="http://github.com/adminfaces"
                template="#{layoutMB.template}">

    <ui:define name="metadata">
        <ui:param name="title" value="Configurações" /> <!-- Automatic create breadCrumb and page title when param 'title' is provided. --> 

        <style type="text/css">
            .ui-datatable .ui-datatable-header {
                text-align: right !important;
            }
        </style>
    </ui:define>

    <ui:define name="description">
        Configuração da Empresa
    </ui:define>

    <ui:define name="body">
        <h:form id="frmProduct" >
            <p:panel>

                <div class="ui-g ui-fluid" >
                    <div class="ui-sm-12 ui-g-6 ">
                        <div class="ui-sm-12 ui-g-8 ">
                            <p:outputLabel value="Company ID" /><br/>
                            <p:inputText value="#{companyMB.company.id}" readonly="true" />
                        </div>
                        <div class="ui-sm-12 ui-g-4 ">
                            <p:outputLabel value="Somente Menu" /><br/>
                            <p:toggleSwitch value="#{companyMB.company.onlyMenu}" disabled="true" />
                        </div>
                        <div class="ui-sm-12 ui-g-12 ">
                            <p:outputLabel value="CNPJ" /><br/>
                            <p:inputText value="#{companyMB.company.cgccpf}" readonly="#{companyMB.company.cgccpf != null}" />
                        </div>
                        <div class="ui-sm-12 ui-g-12 ">
                            <p:outputLabel value="Nome Empresa" /><br/>
                            <p:inputText value="#{companyMB.company.name}" />
                        </div>
                        <div class="ui-sm-6 ui-g-6 ">
                            <p:outputLabel value="Telefone Whatsapp" /><br/>
                            <p:inputMask value="#{companyMB.company.phone}" mask="(99)9999-9999" />
                        </div>
                        <div class="ui-sm-6 ui-g-6 ">
                            <p:outputLabel value="Tempo Médio de Entrega" /><br/>
                            <p:inputText value="#{companyMB.company.aproxTime}"  />
                        </div>
                        <div class="ui-sm-12 ui-g-12 ">
                            <p:outputLabel value="Mensagem de Boas Vindas" /><br/>
                            <small>Máximo 30 car.</small><br/>
                            <p:inputText value="#{companyMB.company.messageWelcome}" maxlength="30" />
                        </div>


                    </div>

                    <div class="ui-sm-12 ui-g-6 ">
                        <div class="img-wrap">
                            <p:outputLabel value="Logo da Empresa (até 100KB)" />
                            <p:fileUpload fileUploadListener="#{companyMB.uploadPhoto}" mode="advanced" dragDropSupport="false"
                                          uploadLabel="Enviar" cancelLabel="Cancelar" label="Escolher" auto="false"
                                          update="photo" sizeLimit="500000" fileLimit="3"  />
                            <hr/>
                            <h:panelGroup id="photo">
                                <h:panelGroup rendered="#{companyMB.company.logo != null and companyMB.company.logo.startsWith('http')}">
                                    <img src="#{companyMB.company.logo}" style="width: 40%"/>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{companyMB.company.logo != null and !companyMB.company.logo.startsWith('http')}">
                                    <img src="data:logo/png;base64, #{companyMB.company.logo}" style="width: 25%"/>
                                </h:panelGroup>
                            </h:panelGroup>
                        </div>
                    </div>
                </div>


                <div class="ui-g ui-fluid"  >
                    <div class="ui-sm-12 ui-g-6 ">
                        <p:fieldset legend="QR Code Menu" rendered="#{companyMB.company.onlyMenu}">
                            <center>
                                <small>
                                    Salve a imagem e imprima
                                </small><br/>
                                <p:barcode value="http://popsales.ddns.net/popsales/rest/#{companyMB.company.nameUrl}/menu/1" type="qr"  width="50%"  />
                            </center>
                        </p:fieldset>
                    </div>
                </div>
                <div class="ui-g ui-fluid">
                    <div class="ui-sm-12 ui-g-12">
                        <p:fieldset legend="Parametros">
                            <div class="ui-sm-6 ui-g-3">
                                <p:outputLabel value="Trabalha com cupom de desconto?"/><br/>
                                <p:toggleSwitch value="#{companyMB.company.worksCoupon}">
                                    <p:ajax event="change" update="@this"/>
                                </p:toggleSwitch>
                            </div>
                            <div class="ui-sm-6 ui-g-3 ">
                                <p:outputLabel value="Trabalha Com Entrega" /><br/>
                                <p:toggleSwitch id="deliveryOnly"  value="#{companyMB.company.deliveryOnly}" disabled="#{!companyMB.company.withdrawalOnly}"  >
                                    <p:ajax update="withdrawalOnly" event="change"/>
                                </p:toggleSwitch>
                            </div>

                            <div class="ui-sm-6 ui-g-3 ">
                                <p:outputLabel value="Trabalha com Retirada" /><br/>
                                <p:toggleSwitch id="withdrawalOnly" value="#{companyMB.company.withdrawalOnly}" disabled="#{!companyMB.company.deliveryOnly}" >
                                    <p:ajax update="deliveryOnly" event="change"/>
                                </p:toggleSwitch>
                            </div>

                            <div class="ui-sm-6 ui-g-3 ">
                                <p:outputLabel value="Quantidade Decimal no Pedido" /><br/>
                                <p:toggleSwitch  value="#{companyMB.company.decimalQuantity}"  />
                            </div>
                            <div class="ui-sm-12 ui-g-12">
                                <table style="width: 100%; border: 1px solid gray; border-collapse: collapse;">
                                    <thead>
                                        <td colspan="6" style="width: 100%; border: 1px solid black; border-collapse: collapse; padding: 15px; text-align: center; font-weight: bold">Prametrize aqui os horários dos turnos, esses horário iram impactar na exibição dos protudos no cardápio
                                         conforme o cadastro</td>
                                    </thead>
                                    <tr>
                                        <td style="width: 100%; border: 1px solid black; border-collapse: collapse; padding: 15px; text-align: center;" colspan="2">Manhã</td>
                                        <td style="width: 100%; border: 1px solid black; border-collapse: collapse; padding: 15px; text-align: center;" colspan="2">Tarde</td>
                                        <td style="width: 100%; border: 1px solid black; border-collapse: collapse; padding: 15px; text-align: center;" colspan="2">Noite</td>
                                    </tr>
                                    <tbody>
                                        <td style="width: 16.66%; border: 1px solid black; border-collapse: collapse; padding: 15px; text-align: left;"><p:outputLabel value="Inicial" class="text-center"/><br/><p:inputMask mask="99:99" value="#{companyMB.company.shift.begginMorning}"/></td>
                                        <td style="width: 16.66%; border: 1px solid black; border-collapse: collapse; padding: 15px; text-align: left;"><p:outputLabel value="Final" class="text-center"/><br/><p:inputMask mask="99:99" value="#{companyMB.company.shift.endMorning}"/></td>
                                        <td style="width: 16.66%; border: 1px solid black; border-collapse: collapse; padding: 15px; text-align: left;"><p:outputLabel value="Inicial" class="text-center"/><br/><p:inputMask mask="99:99" value="#{companyMB.company.shift.begginAfternoon}"/></td>
                                        <td style="width: 16.66%; border: 1px solid black; border-collapse: collapse; padding: 15px; text-align: left;"><p:outputLabel value="Final" class="text-center"/><br/><p:inputMask mask="99:99" value="#{companyMB.company.shift.endAfternoon}"/></td>
                                        <td style="width: 16.66%; border: 1px solid black; border-collapse: collapse; padding: 15px; text-align: left;"><p:outputLabel value="Inicial" class="text-center"/><br/><p:inputMask mask="99:99" value="#{companyMB.company.shift.begginNight}"/></td>
                                        <td style="width: 16.66%; border: 1px solid black; border-collapse: collapse; padding: 15px; text-align: left;"><p:outputLabel value="Final" class="text-center"/><br/><p:inputMask mask="99:99" value="#{companyMB.company.shift.endNight}"/></td>
                                    </tbody>
                                </table>
                            </div>
                        </p:fieldset>
                    </div>
                </div>
                <div class="ui-g" style="border-bottom: 1px solid #ccc;">
                    <div class="ui-g-12">
                        <hr/>
                        <p:commandButton value="Salvar" styleClass="btn-primary" action="#{companyMB.save2()}"  update="@form"/>
                    </div>
                </div>

            </p:panel>
        </h:form>
    </ui:define>
</ui:composition>
